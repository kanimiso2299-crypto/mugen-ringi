<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>無限稟議 - MUGEN RINGI (Ver.6.0)</title>
    <!-- 外部ライブラリ -->
    <script src="https://unpkg.com/break_infinity.js@2/dist/break_infinity.min.js"></script>
    <!-- CSS読み込み -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 左側：作業エリア -->
    <div id="work-area">
        <div id="bonus-display">実績ボーナス: 0%</div>
        <div id="prestige-display">★ 社内伝説度: 0 (+0%)</div>
        
        <h1>【 未処理書類 】</h1>
        <div id="counter">0</div>
        <div id="cps-display">毎秒処理: 0 枚</div>
        
        <button id="stamp-btn" onclick="clickStamp(event)">
            <span>承認</span>
            <span style="font-size:14px; margin-top:5px;">(CLICK)</span>
        </button>
        
        <div id="settings-area">
            <div id="system-msg">自動保存中</div>
            
            <button id="do-prestige-btn" class="prestige-btn" onclick="doPrestige()">
                本社へ栄転する<br>
                <span style="font-size:12px; font-weight:normal;">
                    (リセットして伝説度 +<span id="prestige-gain">0</span> を獲得)
                </span>
            </button>

            <hr style="margin: 20px 0; border: 0; border-top: 1px solid #ccc;">

            <div style="display: flex; gap: 5px; justify-content: center; flex-wrap: wrap;">
                <button class="data-btn" onclick="exportSave()">データ書き出し</button>
                <button class="data-btn" onclick="importSave()">データ読み込み</button>
                <button class="data-btn danger" onclick="hardReset()">完全初期化</button>
            </div>
        </div>
    </div>

    <!-- 右側：パネルエリア -->
    <div id="right-panel">
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('facilities')">人材・設備</button>
            <button class="tab-btn" onclick="switchTab('upgrades')">業務改善</button>
            <button class="tab-btn" onclick="switchTab('achievements')">実績</button>
        </div>

        <!-- ★新機能：まとめ買い切り替えボタン -->
        <div id="buy-mode-container">
            <span style="font-size:12px; font-weight:bold; color:#555; margin-right:10px;">購入数:</span>
            <button class="mode-btn active" id="mode-1" onclick="setBuyMode(1)">x1</button>
            <button class="mode-btn" id="mode-10" onclick="setBuyMode(10)">x10</button>
            <button class="mode-btn" id="mode-100" onclick="setBuyMode(100)">x100</button>
            <button class="mode-btn" id="mode-max" onclick="setBuyMode('MAX')">MAX</button>
        </div>

        <div id="facilities-tab" class="scroll-content">
            <div id="facilities-container"></div>
        </div>

        <div id="upgrades-tab" class="scroll-content" style="display:none;">
            <div id="upgrades-container">
                <p style="padding:10px; color:#999; font-size:12px;">条件を満たすと出現します</p>
            </div>
        </div>
        
        <div id="achievements-tab" class="scroll-content" style="display:none;">
            <div id="achievements-container"></div>
        </div>
    </div>

    <!-- 通知エリア -->
    <div id="notification-area"></div>

    <!-- ★新機能：オフライン進行報告モーダル -->
    <div id="offline-modal" class="modal-overlay" style="display: none;">
        <div class="modal-box">
            <h2>おかえりなさい！</h2>
            <p>あなたが不在の間も、部下たちが業務を遂行しました。</p>
            <div class="offline-result">
                <p>経過時間: <span id="offline-time" style="font-weight:bold;">0</span> 秒</p>
                <p>処理枚数: <span id="offline-earned" style="font-weight:bold; color:#bf0000; font-size:18px;">0</span> 枚</p>
            </div>
            <button onclick="closeModal()">業務再開</button>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
